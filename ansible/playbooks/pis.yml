---
# Parallel execution with strategy: free
# Each Pi runs tasks independently without waiting for others
# Per-host variables (tailscale_ssh_advertise_routes) defined in host_vars/
- name: Configure Raspberry Pis
  hosts: pis
  become: true
  strategy: free
  roles:
    - role: ../roles/tailscale_ssh
    - role: ../roles/debian_upgrade
    - role: ../roles/firmware_upgrade
    - role: ../roles/common
    - role: ../roles/network
    - role: ../roles/k3s_prereqs
    - role: ../roles/security
