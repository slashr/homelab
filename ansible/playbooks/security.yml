---
# Security hardening playbook for public cloud nodes
# Deploys fail2ban and UFW firewall to protect against attacks
#
# Parallel execution with strategy: free
# Each node runs tasks independently without waiting for others
#
# Performance optimizations:
# - strategy: free - hosts proceed independently (saves ~30-50% total time)
# Note: gather_facts required for OS detection (iptables-persistent/UFW conflict on Debian Trixie)
- name: Deploy security hardening to public nodes
  hosts: public_nodes
  gather_facts: true
  become: true
  strategy: free
  roles:
    - role: ../roles/fail2ban
    - role: ../roles/firewall
