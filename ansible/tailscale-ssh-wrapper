#!/bin/bash
# Universal wrapper script for Ansible to use Tailscale SSH when available
# This script checks for Tailscale and falls back to regular ssh
# Works in GitHub Actions, local development, and self-hosted runners

# If tailscale is available and running, use it directly
if command -v tailscale >/dev/null 2>&1 && tailscale status >/dev/null 2>&1; then
  exec tailscale ssh "$@"
fi

# Fallback to regular ssh
exec ssh "$@"

